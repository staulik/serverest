name: Build Stage Serverest test

on:
  push:
    branches:
      - stage-serverest

permissions:
  contents: read  # leitura Ã© suficiente aqui
  id-token: write  # necessÃ¡rio para chamadas entre workflows

jobs:
  trigger_stage:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Simular deploy no Stage
        run: echo "ğŸ”§ Simulando deploy no ambiente stage"

  chamar_pipeline_testes:
    uses: saulik/serverest/.github/workflows/test-pipeline.yml@main
    needs: trigger_stage

