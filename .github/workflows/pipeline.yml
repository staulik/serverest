name: Automation Python>>>Behave>>>Pytest

on:
  workflow_run:
    workflows: ["Build Stage Serverest"]  # o nome EXATO do workflow que dispara
    types: [completed]                     # quando terminar
    branches:                              # opcional, mas recomendado:
      - stage-serverest                    # filtra builds que rolam nessa branch

jobs:
  test:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          repository: ${{ github.event.workflow_run.head_repository.full_name }}
          ref: ${{ github.event.workflow_run.head_branch }}
          fetch-depth: 0

      - name: Instalar dependÃªncias
        run: pip install behave pytest

      - name: Rodar testes
        run: |
          cd aut_front
          behave

      - name: Testes concluÃ­dos
        run: echo "ðŸŸ¢ Testes finalizados com sucesso"

        run: |
          echo "Testes executados com sucesso!"







